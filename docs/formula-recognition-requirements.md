# 公式识别软件需求报告

## 需求概述
- 目标：上传包含数学公式的图片，输出对应的 LaTeX 公式和可嵌入 Python 等语言的公式代码。
- 技术栈：Python + Django（后端），离线识别模型基于百度飞桨（PaddlePaddle）。

## 核心功能
1. 图片上传与管理
   - 支持单张/多张图片上传，常见格式（PNG/JPEG）。
   - 上传方式：文件选择、拖拽上传，以及复制粘贴图片内容直接上传。
   - 存储原图与可选的压缩/灰度化版本，便于后续处理。

2. 公式识别与转换
   - 使用 PaddlePaddle 的离线模型进行公式识别。
   - 输出：LaTeX 表达式；可选的代码格式（如 Sympy/MathML/或 Python 可执行表达式，待确认）。

3. 结果展示与下载
   - 前端页面展示识别结果（原图、识别公式、置信度）。
   - 支持复制/下载识别出的 LaTeX 文本与代码片段。

4. 批处理与历史记录
   - 批量上传和批量识别。
   - 识别历史记录：文件名、时间、结果、置信度、可重新下载。

## 非功能需求
- 部署方式：离线可用；本地或内网服务器运行。
- 性能：单张图片识别延迟尽可能低（受模型和硬件影响）；批量任务需有排队/状态提示。
- 错误处理：上传格式校验、超时和模型加载失败的友好提示。
- 安全：限制上传大小，必要时简单鉴权（如 token 登录或管理员账号）。

## 待确认的开放问题
- PaddlePaddle 具体模型：使用哪一种公式识别模型（如 OCR + LaTeX 转换的特定模型）？
- 输出代码格式：除了 LaTeX，是否需要 Sympy、MathML 或纯 Python 表达式？优先顺序如何？
- 前端需求：是否需要简易的前端页面（Django 模板/静态资源）还是仅 API？
- 部署环境：CPU 还是 GPU？目标操作系统？是否需要 Docker 化？
- 批量识别规模：单批次大致图片数量上限？是否需要异步任务队列（如 Celery + Redis）？

## 实现步骤预估
1. 搭建 Django 项目骨架与上传接口（支持拖拽、复制粘贴上传）。
2. 完成 PaddlePaddle 模型下载、离线加载与推理接口封装。
3. 开发结果格式化模块（LaTeX + 可选代码格式）。
4. 实现前端/API 响应页面或 JSON 返回。
5. 增加历史记录与批量处理支持（可选异步任务）。
6. 打包与部署脚本（如 Dockerfile/requirements）。
